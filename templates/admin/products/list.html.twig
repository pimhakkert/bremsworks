{% extends "admin/base.html.twig" %}
{% block title %}{{ title }}{% endblock %}
{% block body %}
    <div class="sm:flex sm:justify-between sm:items-center mb-8">
        <div class="mb-4 sm:mb-0">
            <h1 class="text-2xl md:text-3xl text-gray-800 dark:text-gray-100 font-bold">{{ title }}</h1>
        </div>
        <div class="grid grid-flow-col sm:auto-cols-max justify-start sm:justify-end gap-2">
            <div class="table-items-action hidden">
                <div class="flex items-center">
                    <div class="hidden xl:block text-sm italic mr-2 whitespace-nowrap"><span class="table-items-count"></span> items selected</div>
                    <button class="btn bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700/60 hover:border-gray-300 dark:hover:border-gray-600 text-yellow-500">Delist</button>
                </div>
            </div>
{#            <div class="relative" x-data="{ open: false, selected: 2 }">#}
{#                <button class="btn justify-between min-w-44 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700/60 hover:border-gray-300 dark:hover:border-gray-600 text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100" aria-label="Select date range" aria-haspopup="true" @click.prevent="open = !open" :aria-expanded="open">#}
{#                                    <span class="flex items-center">#}
{#                                        <svg class="fill-current text-gray-400 dark:text-gray-500 shrink-0 mr-2" width="16" height="16" viewBox="0 0 16 16">#}
{#                                            <path d="M5 4a1 1 0 0 0 0 2h6a1 1 0 1 0 0-2H5Z"></path>#}
{#                                            <path d="M4 0a4 4 0 0 0-4 4v8a4 4 0 0 0 4 4h8a4 4 0 0 0 4-4V4a4 4 0 0 0-4-4H4ZM2 4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Z"></path>#}
{#                                        </svg>#}
{#                                        <span x-text="$refs.options.children[selected].children[1].innerHTML"></span>#}
{#                                    </span>#}
{#                    <svg class="shrink-0 ml-1 fill-current text-gray-400 dark:text-gray-500" width="11" height="7" viewBox="0 0 11 7">#}
{#                        <path d="M5.4 6.8L0 1.4 1.4 0l4 4 4-4 1.4 1.4z"></path>#}
{#                    </svg>#}
{#                </button>#}
{#                <div class="z-10 absolute top-full right-0 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700/60 py-1.5 rounded-lg shadow-lg overflow-hidden mt-1" @click.outside="open = false" @keydown.escape.window="open = false" x-show="open" x-transition:enter="transition ease-out duration-100 transform" x-transition:enter-start="opacity-0 -translate-y-2" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease-out duration-100" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" x-cloak="">#}
{#                    <div class="font-medium text-sm text-gray-600 dark:text-gray-300" x-ref="options">#}
{#                        <button tabindex="0" class="flex items-center w-full hover:bg-gray-50 hover:dark:bg-gray-700/20 py-1 px-3 cursor-pointer" :class="selected === 0 &amp;&amp; 'text-violet-500'" @click="selected = 0;open = false" @focus="open = true" @focusout="open = false">#}
{#                            <svg class="shrink-0 mr-2 fill-current text-violet-500" :class="selected !== 0 &amp;&amp; 'invisible'" width="12" height="9" viewBox="0 0 12 9">#}
{#                                <path d="M10.28.28L3.989 6.575 1.695 4.28A1 1 0 00.28 5.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28.28z"></path>#}
{#                            </svg>#}
{#                            <span>Today</span>#}
{#                        </button>#}
{#                        <button tabindex="0" class="flex items-center w-full hover:bg-gray-50 hover:dark:bg-gray-700/20 py-1 px-3 cursor-pointer" :class="selected === 1 &amp;&amp; 'text-violet-500'" @click="selected = 1;open = false" @focus="open = true" @focusout="open = false">#}
{#                            <svg class="shrink-0 mr-2 fill-current text-violet-500" :class="selected !== 1 &amp;&amp; 'invisible'" width="12" height="9" viewBox="0 0 12 9">#}
{#                                <path d="M10.28.28L3.989 6.575 1.695 4.28A1 1 0 00.28 5.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28.28z"></path>#}
{#                            </svg>#}
{#                            <span>Last 7 Days</span>#}
{#                        </button>#}
{#                        <button tabindex="0" class="flex items-center w-full hover:bg-gray-50 hover:dark:bg-gray-700/20 py-1 px-3 cursor-pointer" :class="selected === 2 &amp;&amp; 'text-violet-500'" @click="selected = 2;open = false" @focus="open = true" @focusout="open = false">#}
{#                            <svg class="shrink-0 mr-2 fill-current text-violet-500" :class="selected !== 2 &amp;&amp; 'invisible'" width="12" height="9" viewBox="0 0 12 9">#}
{#                                <path d="M10.28.28L3.989 6.575 1.695 4.28A1 1 0 00.28 5.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28.28z"></path>#}
{#                            </svg>#}
{#                            <span>Last Month</span>#}
{#                        </button>#}
{#                        <button tabindex="0" class="flex items-center w-full hover:bg-gray-50 hover:dark:bg-gray-700/20 py-1 px-3 cursor-pointer" :class="selected === 3 &amp;&amp; 'text-violet-500'" @click="selected = 3;open = false" @focus="open = true" @focusout="open = false">#}
{#                            <svg class="shrink-0 mr-2 fill-current text-violet-500" :class="selected !== 3 &amp;&amp; 'invisible'" width="12" height="9" viewBox="0 0 12 9">#}
{#                                <path d="M10.28.28L3.989 6.575 1.695 4.28A1 1 0 00.28 5.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28.28z"></path>#}
{#                            </svg>#}
{#                            <span>Last 12 Months</span>#}
{#                        </button>#}
{#                        <button tabindex="0" class="flex items-center w-full hover:bg-gray-50 hover:dark:bg-gray-700/20 py-1 px-3 cursor-pointer" :class="selected === 4 &amp;&amp; 'text-violet-500'" @click="selected = 4;open = false" @focus="open = true" @focusout="open = false">#}
{#                            <svg class="shrink-0 mr-2 fill-current text-violet-500" :class="selected !== 4 &amp;&amp; 'invisible'" width="12" height="9" viewBox="0 0 12 9">#}
{#                                <path d="M10.28.28L3.989 6.575 1.695 4.28A1 1 0 00.28 5.695l3 3a1 1 0 001.414 0l7-7A1 1 0 0010.28.28z"></path>#}
{#                            </svg>#}
{#                            <span>All Time</span>#}
{#                        </button>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}

{#            <!-- Filter button -->#}
{#            <div class="relative inline-flex">#}
{#                <button class="btn px-2.5 bg-white dark:bg-gray-800 border-gray-200 hover:border-gray-300 dark:border-gray-700/60 dark:hover:border-gray-600 text-gray-400 dark:text-gray-500">#}
{#                    <span class="sr-only">Filter</span><wbr>#}
{#                    <svg class="fill-current" width="16" height="16" viewBox="0 0 16 16">#}
{#                        <path d="M0 3a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1ZM3 8a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1ZM7 12a1 1 0 1 0 0 2h2a1 1 0 1 0 0-2H7Z"></path>#}
{#                    </svg>#}
{#                </button>#}
{#            </div>#}

            <!-- Add order button -->
            <a href="{{ path('admin_products_create') }}" class="btn bg-gray-900 text-gray-100 hover:bg-gray-800 dark:bg-gray-100 dark:text-gray-800 dark:hover:bg-white">
                <svg class="fill-current shrink-0 xs:hidden" width="16" height="16" viewBox="0 0 16 16">
                    <path d="M15 7H9V1c0-.6-.4-1-1-1S7 .4 7 1v6H1c-.6 0-1 .4-1 1s.4 1 1 1h6v6c0 .6.4 1 1 1s1-.4 1-1V9h6c.6 0 1-.4 1-1s-.4-1-1-1z"></path>
                </svg>
                <span class="max-xs:sr-only">Add Product</span>
            </a>

        </div>
    </div>
    <div class="bg-white dark:bg-gray-800 shadow-sm rounded-xl mb-8">
        <header class="px-5 py-4">
            <h2 class="font-semibold text-gray-800 dark:text-gray-100">All Products <span class="text-gray-400 dark:text-gray-500 font-medium">{{ count }}</span></h2>
        </header>
        <div x-data="handleSelect">
            <div class="overflow-x-auto">
                <table class="table-auto w-full dark:text-gray-300 divide-y divide-gray-100 dark:divide-gray-700/60">
                    <!-- Table header -->
                    <thead class="text-xs uppercase text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900/20 border-t border-gray-100 dark:border-gray-700/60">
                    <tr>
                        <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap w-px">
                            <div class="flex items-center">
                                <label class="inline-flex">
                                    <span class="sr-only">Select all</span>
                                    <input id="parent-checkbox" class="form-checkbox" type="checkbox" @click="toggleAll">
                                </label>
                            </div>
                        </th>
                        <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="font-semibold text-left">Title</div>
                        </th>
                        <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="font-semibold text-left">Category</div>
                        </th>
                        <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="font-semibold text-left">Price</div>
                        </th>
                        <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="font-semibold text-left">Stock</div>
                        </th>
                        <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="font-semibold text-left">Added</div>
                        </th>
                        <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="font-semibold text-left">Listed</div>
                        </th>
                    </tr>
                    </thead>
                    <!-- Table body -->
                    <tbody class="text-sm" x-data="{ open: false }">
                    <!-- Row -->
                    {% for product in products %}
                    <tr>
                        <td class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap w-px">
                            <div class="flex items-center">
                                <label class="inline-flex">
                                    <span class="sr-only">Select</span>
                                    <input class="table-item form-checkbox" type="checkbox" @click="uncheckParent">
                                </label>
                            </div>
                        </td>
                        <td class="first:pl-5 last:pr-5 whitespace-nowrap">
                            <a href="{{ path('admin_home') }}" class="px-2 py-3 flex items-center">
                                <div  class="font-medium text-sky-700 dark:text-sky-500">{{ product.title|u.truncate(60, '...') }}</div>
                            </a>
                        </td>
                        <td class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div>{{ product.category }}</div>
                        </td>
                        <td class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="text-left font-medium text-green-600">{{ product.price|format_currency('EUR')}}</div>
                        </td>
                        <td class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="text-left font-medium">{{ product.quantity }}</div>
                        </td>
                        <td class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="text-left">{{ product.createdAt|date('d/m/Y', userTimezone) }}</div>
                        </td>
                        <td class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                            <div class="inline-flex font-medium bg-green-500/20 text-green-700 rounded-full text-center px-2.5 py-0.5">Yes</div>
                        </td>
                    </tr>
                    {% endfor %}
                    <!--
                    Example of content revealing when clicking the button on the right side:
                    Note that you must set a "colspan" attribute on the <td> element,
                    and it should match the number of columns in your table
                    -->
{#                    <tr id="description-01" role="region" x-show="open" x-cloak="">#}
{#                        <td colspan="10" class="px-2 first:pl-5 last:pr-5 py-3">#}
{#                            <div class="flex items-center bg-gray-50 dark:bg-gray-950/[0.15] dark:text-gray-400 p-3 -mt-3">#}
{#                                <svg class="shrink-0 fill-current text-gray-400 dark:text-gray-500 mr-2" width="16" height="16">#}
{#                                    <path d="M1 16h3c.3 0 .5-.1.7-.3l11-11c.4-.4.4-1 0-1.4l-3-3c-.4-.4-1-.4-1.4 0l-11 11c-.2.2-.3.4-.3.7v3c0 .6.4 1 1 1zm1-3.6l10-10L13.6 4l-10 10H2v-1.6z"></path>#}
{#                                </svg>#}
{#                                <div class="italic">Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>#}
{#                            </div>#}
{#                        </td>#}
{#                    </tr>#}
                    </tbody>
                </table>

            </div>
        </div>
    </div>
    <script>
        // A basic demo function to handle "select all" functionality
        document.addEventListener('alpine:init', () => {
            Alpine.data('handleSelect', () => ({
                selectall: false,
                selectAction() {
                    countEl = document.querySelector('.table-items-action');
                    if (!countEl) return;
                    checkboxes = document.querySelectorAll('input.table-item:checked');
                    document.querySelector('.table-items-count').innerHTML = checkboxes.length;
                    if (checkboxes.length > 0) {
                        countEl.classList.remove('hidden');
                    } else {
                        countEl.classList.add('hidden');
                    }
                },
                toggleAll() {
                    this.selectall = !this.selectall;
                    checkboxes = document.querySelectorAll('input.table-item');
                    [...checkboxes].map((el) => {
                        el.checked = this.selectall;
                    });
                    this.selectAction();
                },
                uncheckParent() {
                    this.selectall = false;
                    document.getElementById('parent-checkbox').checked = false;
                    this.selectAction();
                }
            }))
        })
    </script>

    <!-- Pagination -->
{#    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">#}
{#        <nav class="mb-4 sm:mb-0 sm:order-1" role="navigation" aria-label="Navigation">#}
{#            <ul class="flex justify-center">#}
{#                <li class="ml-3 first:ml-0">#}
{#                    <span class="btn bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700/60 text-gray-300 dark:text-gray-600">&lt;- Previous</span>#}
{#                </li>#}
{#                <li class="ml-3 first:ml-0">#}
{#                    <a class="btn bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700/60 hover:border-gray-300 dark:hover:border-gray-600 text-gray-800 dark:text-gray-300" href="#0">Next -&gt;</a>#}
{#                </li>#}
{#            </ul>#}
{#        </nav>#}
{#        <div class="text-sm text-gray-500 text-center sm:text-left">#}
{#            Showing <span class="font-medium text-gray-600 dark:text-gray-300">1</span> to <span class="font-medium text-gray-600 dark:text-gray-300">10</span> of <span class="font-medium text-gray-600 dark:text-gray-300">467</span> results#}
{#        </div>#}
{#    </div>#}
{% endblock %}
